<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Bluepages</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet"  href="../css/themes/default/jquery.mobile-1.3.0.css">
<link rel="stylesheet"  href="../css/themes/default/bluePages.css">
<link rel="stylesheet"  href="../css/estilos.css">

<script src="../js/jquery.js"></script>
<script src="../js/jquery.mobile-1.3.0.min.js"></script>
<script src="../js/jquery.list.min.js"></script>
</head>

<body>
    <div data-role="page" id="page1">
    <script type="text/javascript">

    $(document).ready(function() {

        function getParameterByName(name)
        {
            name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
            var regexS = "[\\?&]" + name + "=([^&#]*)";
            var regex = new RegExp(regexS);
            var results = regex.exec(window.location.search);
            if(results == null)
                return "";
            else
                return decodeURIComponent(results[1].replace(/\+/g, " "));
        }


        var marco = $(".ui-header").height() + $(".ui-footer").height();

         $(".uiContentMain").css("min-height", $(window).height() -  marco - 4);

        
        var sel_especialidades = getParameterByName('id');
        var url =  "http://bluepages.md/ws/search.php";
        $.getJSON(url + "?callback=?", {
            categoria: "1",
            sel_especialidades: sel_especialidades,
            id_pais: "271",
            id_estado: "4",
            busqueda: ""
        }, function(data) {
            for(var i in data[0]) {
                if(data[0][i] == 'inicial'){
                    $('#especialidades').append('<dt>'+data[1][i]+'</dt>');
                }else{
                    var Datosfin = data[1][i];
                    $('#especialidades').append('<dd>'+data[1][i]+'</dd>');
                }
            }
         

            function prepareList() {
                 // Generate the list of buttons for the scrollto links.
                $('#especialidades dt').each(function(i){
                    
                    // Create the new button element for this header.
                    $('#buttons').append('<div><a href="#" data-header="'+i+'">'+$(this).text()+'</a></div>');
                });
                
                // Add an event handler 
                $(document).on('click', '#buttons a', function(){
                
                    // Scroll to the selected element.
                    $('#especialidades').list( 'scrollTo', $(this).attr('data-header'), 'fast', 'swing' );
                });
                
                // Add the list plugin.
                $('#especialidades').list();  
            }

            prepareList();      
        });

    });
    </script>        
        <div data-theme="a" data-role="header">
            <h3>
                <a href="../index.html">
                    <div id="logoInt"></div>
                </a>
            </h3>
        </div>
        <div data-role="content" id="content" class="uiContentMain">
            <div id="search">
                <input type="text" id="searchInp" placeholder="search your especialist...">
                <a href="#" data-role="button" data-theme="c">Advanced Search</a>
            </div>
            <div id="choosecat">
                <p>Escoge una especialidad:</p>
                <div id="tableList">
                    <div id="buttons"></div>
                    <dl id="especialidades">
                    </dl>
                </div>
            </div>
        </div>
        <div data-theme="d" data-role="footer" data-position="fixed">
            <ul>
                <li><a href="#"><img src="../images/homeFbtn.jpg"></a></li>
                <li><a href="#"><img src="../images/profileFbtn.jpg"></a></li>
                <li><a href="#"><img src="../images/networksFbtn.jpg"></a></li>
                <li><a href="#"><img src="../images/notificationsFbtn.jpg"></a></li>
            </ul>
        </div>
    </div>
</body>
</html>
